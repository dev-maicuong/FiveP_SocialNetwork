@using FivePSocialNetwork.Models;
@{
    ViewBag.Title = "IndexCenter";
    Layout = "~/Views/Shared/_LayoutCenter.cshtml";
    if (Request.Cookies["user_id"] != null)
    {
        int user_id = int.Parse(Request.Cookies["user_id"].Value.ToString());
        FivePSocialNetWorkEntities db = new FivePSocialNetWorkEntities();
        User user = db.Users.Find(user_id);
    }
}
<div ng-app="myApp" ng-controller="myCtrl">
    <div class="header bg-primary pb-6">
        <div class="container-fluid">
            <div class="header-body">
                <div class="row align-items-center py-4">
                    <div class="col-lg-6 col-7">
                        <h6 class="h2 text-white d-inline-block mb-0">Tất cả câu hỏi</h6>
                        <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
                            <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                                <li class="breadcrumb-item"><a href="#"><i class="fas fa-home"></i></a></li>
                                <li class="breadcrumb-item"><a href="/">Trang chủ</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Tất cả câu hỏi</li>
                            </ol>
                        </nav>
                    </div>
                    <div class="col-lg-6 col-5 text-right">
                        <a href="@Url.Action("PostQuestion","Question")" class="btn btn-sm btn-neutral"><i class="far fa-paper-plane"></i> Đặt câu hỏi?</a>
                        <a href="#" class="btn btn-sm btn-neutral"><i class="far fa-edit"></i> Đăng bài viết </a>
                    </div>
                </div>
                <!-- Card stats -->
                <div class="row">
                    <div class="col-xl-3 col-md-6">
                        <div class="card card-stats">
                            <!-- Card body -->
                            <div class="card-body">
                                <div class="row">
                                    <div class="col">
                                        <h5 class="card-title text-uppercase text-muted mb-0">Câu hỏi</h5>
                                        <span class="h2 font-weight-bold mb-0">{{Statistical.totalQuestion}}</span>
                                    </div>
                                    <div class="col-auto">
                                        <div class="icon icon-shape bg-gradient-red text-white rounded-circle shadow">
                                            <i class="fas fa-question"></i>
                                        </div>
                                    </div>
                                </div>
                                <p class="mt-3 mb-0 text-sm">
                                    <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                                    <span class="text-nowrap">Since last month</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card card-stats">
                            <!-- Card body -->
                            <div class="card-body">
                                <div class="row">
                                    <div class="col">
                                        <h5 class="card-title text-uppercase text-muted mb-0">Trả lời</h5>
                                        <span class="h2 font-weight-bold mb-0">{{totalQuestion.totalAnswer}}</span>
                                    </div>
                                    <div class="col-auto">
                                        <div class="icon icon-shape bg-gradient-orange text-white rounded-circle shadow">
                                            <i class="fas fa-reply-all"></i>
                                        </div>
                                    </div>
                                </div>
                                <p class="mt-3 mb-0 text-sm">
                                    <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                                    <span class="text-nowrap">Since last month</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card card-stats">
                            <!-- Card body -->
                            <div class="card-body">
                                <div class="row">
                                    <div class="col">
                                        <h5 class="card-title text-uppercase text-muted mb-0">Công nghệ</h5>
                                        <span class="h2 font-weight-bold mb-0">{{totalQuestion.totalTechnology}}</span>
                                    </div>
                                    <div class="col-auto">
                                        <div class="icon icon-shape bg-gradient-info text-white rounded-circle shadow">
                                            <i class="fab fa-react"></i>
                                        </div>
                                    </div>
                                </div>
                                <p class="mt-3 mb-0 text-sm">
                                    <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                                    <span class="text-nowrap">Since last month</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card card-stats">
                            <!-- Card body -->
                            <div class="card-body">
                                <div class="row">
                                    <div class="col">
                                        <h5 class="card-title text-uppercase text-muted mb-0">Bài viết</h5>
                                        <span class="h2 font-weight-bold mb-0">{{totalQuestion.totalPost}}</span>
                                    </div>
                                    <div class="col-auto">
                                        <div class="icon icon-shape bg-gradient-green text-white rounded-circle shadow">
                                            <i class="far fa-newspaper"></i>
                                        </div>
                                    </div>
                                </div>
                                <p class="mt-3 mb-0 text-sm">
                                    <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                                    <span class="text-nowrap">Since last month</span>
                                </p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- Page content -->
    <div class="container-fluid mt--6">

        <div class="row">

            <div class="col-xl-8">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="btn-group float-right" role="group" aria-label="Basic example">
                            <a href="@Url.Action("Hot", "Center")" class="btn btn-default" data-toggle="tooltip" data-placement="top" title="Kiếm điểm nổi tiếng nào?" data-container="body" data-animation="true">Thưởng<i class="far fa-snowflake text-danger"></i></a>
                            <a href="@Url.Action("Week","Center")" class="btn btn-secondary" data-toggle="tooltip" data-placement="top" title="Câu hỏi được trả lời nhiều trong tháng" data-container="body" data-animation="true">Tháng</a>
                            <a href="@Url.Action("View","Center")" class="btn btn-secondary" data-toggle="tooltip" data-placement="top" title="Xếp theo lượt xem cao đến thấp" data-container="body" data-animation="true">Lượt xem</a>
                            <a href="@Url.Action("Reply","Center")" class="btn btn-secondary" data-toggle="tooltip" data-placement="top" title="Xếp theo trả lời cao đến thấp" data-container="body" data-animation="true">Trả lời</a>
                        </div>
                    </div>

                </div>
                <div class="card gedf-card" ng-repeat="x in listQuestions">
                    <div class="card-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="mr-2">
                                    <img class="rounded-circle" width="45" src="~/Image/Users/{{x.user_avatar}}" alt="">
                                </div>
                                <div class="ml-2">
                                    <a href="#" class="h5 m-0">{{x.user_firstName +" "+ x.user_lastName}}</a>

                                    <div class="h7 text-muted">{{x.user_vipMedal}}<i class="fab fa-galactic-senate" style="color:orangered;font-size:28px"></i> {{x.user_goldMedal}}<i class="fas fa-medal" style="color:yellow"></i>  {{x.user_silverMedal}}<i class="fas fa-medal" style="color:silver"></i> {{x.user_brozeMedal}}<i class="fas fa-medal" style="color:#e88d15"></i> </div>
                                </div>
                            </div>
                            <div>
                                <div class="dropdown">
                                    <button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fa fa-ellipsis-h"></i>
                                    </button>
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1">
                                        <div class="h6 dropdown-header">Configuration</div>
                                        <a class="dropdown-item" href="#">Xóa</a>
                                        <a class="dropdown-item" href="#">Sữa</a>
                                        <a class="dropdown-item" href="#">Ẩn</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="text-muted h7 mb-2"> <i class="fa fa-clock-o"></i> {{x.question_dateCreate}}</div>
                        <a class="card-link" ng-href="/FunctionAtDetailQuestion/DetailQuestion/{{x.question_id}}">
                            <h5 class="card-title">
                                {{x.question_title}}
                            </h5>
                        </a>
                        <p class="text-body" ng-bind-html="x.question_content">
                        </p>
                        <div>
                            <span class="badge badge-primary" ng-repeat="y in listTechnologyQuestions" ng-show="y.question_id == x.question_id">{{y.technology_name}}</span>

                        </div>


                    </div>

                    <div class="card-footer">
                        <a class="card-link"><i class="fas fa-fire-alt"></i> Nổi tiếng {{x.user_popular}}</a>
                        <a class="card-link"><i class="fas fa-reply-all"></i> Trả lời {{x.question_Answer}}</a>
                        <a class="card-link"><i class="fas fa-eye"></i> Lượt xem {{x.question_view}}</a>
                    </div>
                </div>


                <div class="clearfix"></div>
                <div class="row">
                    <div class="col-xl-12 float-left">
                        phân trang
                    </div>
                </div>

            </div>
            <div class="col-xl-4">
                <div class="">

                    <img src="~/Image/Advertisement/khoa-hoc-data-science-khtn.png" class="w-100 h-100 card" />
                </div>

                <div class="card gedf-card">
                    <div class="card-body">
                        <h4 class="card-title">Top câu hỏi</h4>
                        <div class="row">
                            <div class="col-2 mr--1">
                                <a href="#"><i class="fas fa-info-circle"></i></a>
                            </div>
                            <div class="col-xl-10 ml--3">
                                ...
                            </div>
                        </div>
                        <span style="font-size:28px">...</span>
                    </div>
                </div>
                <div class="card gedf-card">
                    <div class="card-body">
                        <h4 class="card-title">Những người cùng công nghệ</h4>
                        <div class="row">
                            <div class="col-2 mr--1">
                                <a href="#"><i class="fas fa-info-circle"></i></a>
                            </div>
                            <div class="col-xl-10 ml--3">
                                ...
                            </div>
                        </div>
                        <span style="font-size:28px">...</span>
                    </div>
                </div>
                <div class="card gedf-card">
                    <div class="card-body">
                        <h4 class="card-title">Công nghệ</h4>
                        <div class="row">
                            <div class="col-2 mr--1">
                                <a href="#"><i class="fas fa-info-circle"></i></a>
                            </div>
                            <div class="col-xl-10 ml--3">
                                ...
                            </div>
                        </div>
                        <span style="font-size:28px">...</span>
                    </div>
                </div>
                <div class="card gedf-card">
                    <div class="card-body">
                        <h4 class="card-title">Thành viên</h4>
                        <div class="row">
                            <div class="col-2 mr--1">
                                <a href="#"><i class="fas fa-info-circle"></i></a>
                            </div>
                            <div class="col-xl-10 ml--3">
                                ...
                            </div>
                        </div>
                        <span style="font-size:28px">...</span>
                    </div>
                </div>
                <div class="card gedf-card">
                    <div class="card-body">
                        <h4 class="card-title">Top câu hỏi công nghệ khác</h4>
                        <div class="row">
                            <div class="col-2 mr--1">
                                <a href="#"><i class="fas fa-info-circle"></i></a>
                            </div>
                            <div class="col-xl-10 ml--3">
                                ...
                            </div>
                        </div>
                        <span style="font-size:28px">...</span>
                    </div>
                </div>
            </div>


        </div>
        <!-- Footer -->
        <footer class="footer pt-0">
            <div class="row align-items-center justify-content-lg-between">
                <div class="col-lg-6">
                    <div class="copyright text-center  text-lg-left  text-muted">
                        &copy; 2020 <a href="https://www.creative-tim.com" class="font-weight-bold ml-1" target="_blank">Creative Tim</a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <ul class="nav nav-footer justify-content-center justify-content-lg-end">
                        <li class="nav-item">
                            <a href="https://www.creative-tim.com" class="nav-link" target="_blank">Creative Tim</a>
                        </li>
                        <li class="nav-item">
                            <a href="https://www.creative-tim.com/presentation" class="nav-link" target="_blank">About Us</a>
                        </li>
                        <li class="nav-item">
                            <a href="http://blog.creative-tim.com" class="nav-link" target="_blank">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a href="https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md" class="nav-link" target="_blank">MIT License</a>
                        </li>
                    </ul>
                </div>
            </div>
        </footer>
    </div>
</div>
<script>
    var app = angular.module('myApp', ['ngSanitize']);
    app.controller('myCtrl', function ($scope, $http) {
        $http.get("/Center/QuestionsJson")
            .then(function (response) {
                // First function handles success
                $scope.listQuestions = response.data;
            }, function (response) {
                // Second function handles error
                $scope.listQuestions = "Something went wrong";
            });
        // show công nghệ
        $http.get("/Center/ListTechnologyQuestion")
            .then(function (response) {
                // First function handles success
                $scope.listTechnologyQuestions = response.data;
            }, function (response) {
                // Second function handles error
                $scope.listTechnologyQuestions = "Something went wrong";
            });
        //show thống kê
        $http.get("/Center/Statistical")
            .then(function (response) {
                // First function handles success
                $scope.Statistical = response.data;
            }, function (response) {
                // Second function handles error
                $scope.Statistical = "Something went wrong";
            });

    });
</script>